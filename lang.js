/* ================================================================
   MUSLIM APP â€” SYSTÃˆME DE LANGUES
   FranÃ§ais (fr) & Wolof (wo)
   ================================================================ */

var LANG = {

  /* ============================
     INTERFACE GÃ‰NÃ‰RALE
     ============================ */
  home_greeting_morning: {
    fr: 'ðŸŒ… Bonjour',
    wo: 'ðŸŒ… JÃ mm nga fanaan'
  },
  home_greeting_afternoon: {
    fr: 'â˜€ï¸ Bon aprÃ¨s-midi',
    wo: 'â˜€ï¸ JÃ mm nga yendoo'
  },
  home_greeting_evening: {
    fr: 'ðŸŒ† Bonsoir',
    wo: 'ðŸŒ† JÃ mm nga yendoo'
  },
  home_greeting_night: {
    fr: 'ðŸŒ™ Bonne nuit',
    wo: 'ðŸŒ™ Fanaanal jÃ mm'
  },
  app_tagline: {
    fr: 'Coran Â· Invocations Â· Dhikr',
    wo: 'Alkuraan Â· Ã‘aan Â· Dikr'
  },
  verse_of_day: {
    fr: 'âœ¦ Verset du jour âœ¦',
    wo: 'âœ¦ Aayatu bÃ©s bi âœ¦'
  },

  /* ============================
     FEATURE CARDS
     ============================ */
  card_quran_title: {
    fr: 'Le Coran',
    wo: 'Alkuraan gi'
  },
  card_quran_desc: {
    fr: 'Lisez et Ã©coutez les 30 Juz et 114 Sourates',
    wo: 'JÃ ng te dÃ©glu 30 Juz ak 114 Surat yi'
  },
  card_duas_title: {
    fr: 'Invocations',
    wo: 'Ã‘aanal yi'
  },
  card_duas_desc: {
    fr: 'Duas du matin, soir, priÃ¨re, repas...',
    wo: 'Ã‘aan yi ci suba, ngoon, julli, lekk...'
  },
  card_dhikr_title: {
    fr: 'Dhikr & Tasbih',
    wo: 'Dikr ak Tasbih'
  },
  card_dhikr_desc: {
    fr: 'Compteur de dhikr : SubhanAllah, Alhamdulillah...',
    wo: 'Waaraange dikr : SubhanAllah, Alhamdulillah...'
  },
  card_soon_title: {
    fr: 'BientÃ´t',
    wo: 'Ci kanam'
  },
  card_soon_desc: {
    fr: 'Horaires de priÃ¨re, Tasbih, Qibla...',
    wo: 'Waxtu julli, Tasbih, Qibla...'
  },

  /* ============================
     SETTINGS
     ============================ */
  settings: {
    fr: 'âš™ï¸ ParamÃ¨tres',
    wo: 'âš™ï¸ TÃ«ralinu yi'
  },
  settings_reciter: {
    fr: 'RÃ©citateur',
    wo: 'Kiy jÃ ng Alkuraan bi'
  },
  settings_translation: {
    fr: 'Traduction du Coran',
    wo: 'Tekki Alkuraan bi'
  },
  settings_language: {
    fr: 'Langue de l\'application',
    wo: 'LÃ kku jÃ«fandikukaay bi'
  },
  close: {
    fr: 'âœ“ Fermer',
    wo: 'âœ“ TÃ«j'
  },

  /* ============================
     STATS
     ============================ */
  stat_juz_read: {
    fr: 'Juz lus',
    wo: 'Juz yi jÃ ng'
  },
  stat_surahs: {
    fr: 'Sourates',
    wo: 'Surat yi'
  },
  stat_verses: {
    fr: 'Versets',
    wo: 'Aaya yi'
  },
  stat_dhikr: {
    fr: 'Adhkar',
    wo: 'Dikr yi'
  },

  /* ============================
     QURAN PAGE
     ============================ */
  back_home: {
    fr: 'â† Accueil',
    wo: 'â† Dallu'
  },
  back_return: {
    fr: 'â† Retour',
    wo: 'â† Dellu'
  },
  noble_quran: {
    fr: 'Le Noble Coran',
    wo: 'Alkuraan bu sell bi'
  },
  progression: {
    fr: 'Progression',
    wo: 'Yeesalaat'
  },
  by_juz: {
    fr: 'ðŸ“– Par Juz',
    wo: 'ðŸ“– Ci Juz'
  },
  by_surah: {
    fr: 'ðŸ“‹ Par Sourate',
    wo: 'ðŸ“‹ Ci Surat'
  },
  search_surah: {
    fr: 'Rechercher une sourate...',
    wo: 'Seet ab Surat...'
  },
  read: {
    fr: 'ðŸ“– Lire',
    wo: 'ðŸ“– JÃ ng'
  },
  marked_read: {
    fr: 'âœ“ TerminÃ©',
    wo: 'âœ“ Jeex na'
  },
  mark_read: {
    fr: '+ Lu',
    wo: '+ JÃ ng na'
  },
  listen: {
    fr: 'â–¶ Ã‰couter',
    wo: 'â–¶ DÃ©glu'
  },
  playing_now: {
    fr: 'â¸ En cours',
    wo: 'â¸ Yaa ngi dem'
  },
  verses: {
    fr: 'versets',
    wo: 'aaya'
  },
  meccan: {
    fr: 'ðŸ•‹ Mecquoise',
    wo: 'ðŸ•‹ Makka'
  },
  medinan: {
    fr: 'ðŸ•Œ MÃ©dinoise',
    wo: 'ðŸ•Œ Madiina'
  },
  verse: {
    fr: 'Verset',
    wo: 'Aaya'
  },
  font_size: {
    fr: 'Taille',
    wo: 'Dayoo'
  },
  prev_surah: {
    fr: 'â† Sourate prÃ©c.',
    wo: 'â† Surat bi jiitu'
  },
  next_surah: {
    fr: 'Sourate suiv. â†’',
    wo: 'Surat bi toftal â†’'
  },

  /* ============================
     AUDIO
     ============================ */
  repeat_on: {
    fr: 'ðŸ” RÃ©pÃ©tition activÃ©e',
    wo: 'ðŸ” WÃ Ã±Ã±i jÃ ng'
  },
  repeat_off: {
    fr: 'ðŸ” DÃ©sactivÃ©e',
    wo: 'ðŸ” Fomm na'
  },

  /* ============================
     SHARE
     ============================ */
  share_verse: {
    fr: 'ðŸ“¤ Partager',
    wo: 'ðŸ“¤ SÃ©ddoo'
  },
  share_copied: {
    fr: 'ðŸ“‹ Verset copiÃ© !',
    wo: 'ðŸ“‹ Aaya bi duppi na !'
  },

  /* ============================
     ERRORS
     ============================ */
  loading: {
    fr: 'Chargement...',
    wo: 'Yaa ngi yab...'
  },
  error_loading: {
    fr: 'Erreur de chargement',
    wo: 'Njuumte ci yab bi'
  },
  check_connection: {
    fr: 'VÃ©rifiez votre connexion internet',
    wo: 'Seetal sa internet bi'
  },
  retry: {
    fr: 'ðŸ”„ RÃ©essayer',
    wo: 'ðŸ”„ JÃ©emaat'
  },

  /* ============================
     DUAS PAGE
     ============================ */
  invocations_title: {
    fr: 'Invocations & Adhkar',
    wo: 'Ã‘aanal yi ak Dikr yi'
  },
  categories: {
    fr: 'â† CatÃ©gories',
    wo: 'â† WÃ ll yi'
  },
  texts: {
    fr: 'textes',
    wo: 'bind yi'
  },
  repeat_times: {
    fr: 'Ã€ rÃ©pÃ©ter',
    wo: 'WÃ Ã±Ã±i ko'
  },

  /* ============================
     DUAS CATEGORIES
     ============================ */
  cat_morning: {
    fr: 'Adhkar du Matin',
    wo: 'Dikru suba si'
  },
  cat_evening: {
    fr: 'Adhkar du Soir',
    wo: 'Dikru ngoon si'
  },
  cat_after_salah: {
    fr: 'AprÃ¨s la PriÃ¨re',
    wo: 'Ginnaaw julli gi'
  },
  cat_sleep: {
    fr: 'Sommeil & RÃ©veil',
    wo: 'Nelaw ak XÃ«y'
  },
  cat_food: {
    fr: 'Repas',
    wo: 'Lekk'
  },
  cat_travel: {
    fr: 'Voyage',
    wo: 'Tukki'
  },
  cat_protection: {
    fr: 'Protection',
    wo: 'Aar'
  },
  cat_forgiveness: {
    fr: 'Pardon & Repentir',
    wo: 'Baal ak Tuub'
  },
  cat_parents: {
    fr: 'Pour les Parents',
    wo: 'Ndey ak Baay'
  },
  cat_quran_duas: {
    fr: 'Duas du Coran',
    wo: 'Ã‘aanu Alkuraan'
  },

  /* ============================
     DHIKR PAGE
     ============================ */
  dhikr_title: {
    fr: 'Dhikr & Tasbih',
    wo: 'Dikr ak Tasbih'
  },
  completed: {
    fr: 'terminÃ©s',
    wo: 'jeex naÃ±u'
  },
  reset: {
    fr: 'ðŸ”„ RÃ©initialiser',
    wo: 'ðŸ”„ Dooraat'
  },
  reset_all: {
    fr: 'ðŸ”„ Tout rÃ©initialiser',
    wo: 'ðŸ”„ Dooraat lÃ©pp'
  },
  reset_confirm: {
    fr: 'RÃ©initialiser tous les compteurs ?',
    wo: 'Dooraat waaraange yi yÃ©pp ?'
  },
  dhikr_done: {
    fr: 'âœ… BarakAllahu fik !',
    wo: 'âœ… BarakAllahu fiik !'
  },
  all_done_title: {
    fr: 'Tous les dhikr sont terminÃ©s !',
    wo: 'Dikr yi yÃ©pp jeex naÃ±u !'
  },

  /* ============================
     FOOTER
     ============================ */
  footer_credit: {
    fr: 'Sadaqa Jariya',
    wo: 'Sarax bu sore'
  }
};


/* ================================================================
   FONCTIONS DU SYSTÃˆME DE LANGUE
   ================================================================ */

/* Lire la langue actuelle */
function getCurrentLang() {
  return localStorage.getItem('q_lang') || 'fr';
}

/* Changer la langue */
function setLang(lang) {
  localStorage.setItem('q_lang', lang);
  return lang;
}

/* Traduire une clÃ© */
function t(key) {
  var lang = getCurrentLang();
  if (LANG[key]) {
    return LANG[key][lang] || LANG[key]['fr'] || key;
  }
  return key;
}

/* Salutation selon l'heure */
function getGreeting() {
  var h = new Date().getHours();
  if (h >= 5 && h < 12)  return t('home_greeting_morning');
  if (h >= 12 && h < 17) return t('home_greeting_afternoon');
  if (h >= 17 && h < 21) return t('home_greeting_evening');
  return t('home_greeting_night');
}

/* ================================================================
   RAFRAÃŽCHIR TOUS LES TEXTES DE LA PAGE
   Fonctionne sur TOUTES les pages (index, quran, duas, dhikr)
   ================================================================ */
function refreshLang() {
  /* 1. Mettre Ã  jour tous les Ã©lÃ©ments avec data-i18n */
  document.querySelectorAll('[data-i18n]').forEach(function(el) {
    var key = el.getAttribute('data-i18n');
    if (LANG[key]) {
      /* Pour les inputs (placeholder) */
      if (el.tagName === 'INPUT') {
        el.placeholder = t(key);
      } else {
        el.textContent = t(key);
      }
    }
  });

  /* 2. Mettre Ã  jour le greeting si prÃ©sent */
  var greetEl = document.getElementById('greeting');
  if (greetEl) greetEl.textContent = getGreeting();

  /* 3. Mettre Ã  jour les boutons de langue */
  var btnFr = document.getElementById('langFr');
  var btnWo = document.getElementById('langWo');
  var lang = getCurrentLang();
  if (btnFr) btnFr.classList.toggle('active', lang === 'fr');
  if (btnWo) btnWo.classList.toggle('active', lang === 'wo');

  /* 4. Appeler le callback spÃ©cifique Ã  la page si dÃ©fini */
  if (typeof onLangChanged === 'function') {
    onLangChanged();
  }
}

/* Changer de langue (appelÃ© par les boutons) */
function switchLang(lang) {
  setLang(lang);
  refreshLang();
}